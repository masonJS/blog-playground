## 1. 동시성이란 무엇인가?

#### 무어의 법칙
> ***"마이크로칩에 저장할 수 있는 데이터의 분량(트랜지스터의 수)이 대략 24개월(2년)마다 2배씩 증가한다."***

#### 처리율
- 일정 시간 동안 실제로 처리할 수 있는 데이터나 작업의 양
- IT와 비즈니스 환경에서 처리율은 조금씩 다른 단위로 표현 
  - 네트워크 및 통신 (인터넷 속도)
    - 데이터가 네트워크를 통해 얼마나 성공적으로 전송되었는지를 측정합니다. 
    - 단위: bps (bits per second), Mbps, Gbps 
    - 예: "우리 집 인터넷 대역폭은 1Gbps인데, 실제 다운로드 처리율은 500Mbps밖에 안 나와."
  - 컴퓨터 시스템 및 서버 (성능)
    - CPU나 서버가 단위 시간당 처리하는 트랜잭션(작업)의 수입니다. 
    - 단위: TPS (Transactions Per Second), RPM (Requests Per Minute)
    - 예: "이 웹사이트는 접속자가 몰리면 처리율이 떨어져서 접속이 느려져."
  - 생산 및 비즈니스 (생산성)
    - 공장에서 제품을 생산하거나 업무를 처리하는 속도입니다. 
    - 단위: 시간당 생산량 (Units per Hour)
    - 예: "새로운 기계를 도입해서 공장의 시간당 처리율을 20% 높였습니다."

#### 리틀의 법칙
> $$L = \lambda \times W$$
- $L$ (Concurrency): 시스템 안에 있는 작업의 수 (동시성)
- $\lambda$ (Throughput): 밖에서 들어오는 작업의 처리 속도
- $W$ (Latency): 작업 하나가 머무르는 시간 (지연시간)


- 적당한 동시성은 자원을 효율적으로 쓰게 해주지만, 감당할 수 있는 수준을 넘어서는 과도한 동시성은 지연시간을 폭발적으로 증가

#### 동시성의 계층

1. 하드웨어 계층 (The Hardware Layer)
- 가장 밑바닥, 물리적인 칩(Chip) 수준에서의 동시성입니다. 프로그래머가 직접 제어하기보다는 CPU 설계 단계에서 결정됩니다. 
- **파이프라이닝 (Pipelining)**: 한 명령어가 끝나기도 전에 다음 명령어를 미리 가져와 준비시키는 것 (공장 컨베이어 벨트 원리). 
- **멀티 코어 (Multi-core)**: 물리적인 두뇌(코어)를 여러 개 두어 진짜로 동시에 계산하는 것. 
- **SIMD (Single Instruction, Multiple Data)**: 명령어 하나로 여러 개의 데이터를 한꺼번에 처리하는 기술 (그래픽 처리에 주로 쓰임).

2. 운영체제 계층 (The OS Layer)
- 하드웨어 위에서 자원을 관리하는 운영체제(Windows, Linux 등)가 만드는 동시성입니다. 
- **멀티 태스킹 (Multi-tasking)**: 음악을 들으며 문서를 작성할 수 있는 이유입니다. OS가 아주 짧은 시간(Time slice) 단위로 CPU를 번갈아 가며 할당해, 마치 동시에 실행되는 것처럼 속이는 기술입니다. 
- **커널 스레드 (Kernel Thread)**: OS 커널이 직접 관리하고 스케줄링하는 실행 단위입니다.

3. 애플리케이션/언어 계층 (The Application Layer)
- 개발자가 코드를 짤 때 다루는 영역입니다. 여기서 **어떤 동시성 모델**을 쓰느냐에 따라 성능이 갈립니다. 
- **스레드 (Thread)**: Java, C++ 등에서 사용하는 전통적인 방식 (OS 스레드와 1:1 매핑되는 경우가 많음). 
- **경량 스레드 (Lightweight Thread)**: Go의 Goroutine, Kotlin의 Coroutine 등이 여기에 해당합니다. OS 스레드 하나 위에서 수천 개의 작은 작업(논리적 스레드)을 동시에 돌리는 방식입니다. (메모리를 훨씬 적게 씁니다.)
- **비동기 프로그래밍 (Async/Await)**: JavaScript(Node.js)처럼 하나의 스레드로 멈추지 않고 계속 이벤트를 처리하는 방식입니다.

#### 멀티 코어
- 하나의 CPU 칩(패키지) 안에 계산을 담당하는 두뇌(코어)를 여러 개 집어넣은 것
- 멀티 코어의 구조와 작동 방식 
  - 하나의 CPU 다이(Die) 안에 여러 개의 독립적인 프로세서(Core)가 존재
  - 1. 독립적인 실행: 각 코어는 서로 다른 명령어를 동시에 처리할 수 있습니다. 1번 코어는 게임을 돌리고, 2번 코어는 유튜브 영상을 재생하고, 3번 코어는 백신 검사를 하는 식입니다.
  - 2. 캐시 메모리 공유: 각 코어는 자신만의 작은 기억 공간(L1, L2 캐시)을 가지지만, L3 캐시라는 더 큰 창고는 서로 공유합니다. 여기서 데이터를 주고받으며 협업합니다.


#### 멀티 태스킹
- 운영체제(OS)가 여러 개의 프로그램(프로세스)을 동시에 실행하는 것처럼 보이게 만드는 기술
- 멀티 태스킹의 비밀: 시분할(Time Slicing)
  - 시간이라는 단위를 잘게 쪼개서 번갈아 가며 처리. 이를 시분할 시스템(Time Slicing)이라고 함.
  - 1. 초고속 스위칭: CPU는 0.00001초(수십 밀리초) 동안 멜론을 실행하고, 다음 0.00001초는 카톡을 실행하고, 그다음은 엑셀을 실행합니다.
  - 2. 착시: 이 전환 속도가 인간의 인지 능력보다 훨씬 빠르기 때문에, 우리 눈에는 모든 프로그램이 동시에 멈추지 않고 돌아가는 것처럼 보입니다.


