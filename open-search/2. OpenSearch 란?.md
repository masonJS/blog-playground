## OpenSearch 란?

### OpenSearch란?

OpenSearch는 오픈소스 분산 검색 및 데이터 분석 엔진입니다. 실시간 로그 분석, 애플리케이션 모니터링, 웹사이트 검색 등 다양한 데이터 활용에 쓰입니다. Apache 2.0 라이선스로 제공되어 누구나 자유롭게 사용, 수정, 배포, 상업화가 가능합니다.

2021년 AWS가 Elasticsearch 7.10을 포크하여 시작한 프로젝트이며, 2024년 Linux Foundation 산하 **OpenSearch Software Foundation**으로 이관되어 현재는 커뮤니티 주도로 개발되고 있습니다.

### OpenSearch의 탄생 배경

- **Elasticsearch와 AWS의 갈등:**
원래 AWS는 Elasticsearch(Elastic이 개발한 오픈소스 검색엔진)를 기반으로 한 클라우드 서비스를 제공했습니다.
Elastic은 AWS가 자신들의 오픈소스 코드를 활용해 수익을 내면서도, 기여나 비용을 지불하지 않는다고 판단해 2021년 라이선스를 Apache 2.0에서 Elastic License 2.0 및 SSPL로 변경했습니다.

- **라이선스 변경의 영향:**
Elastic License 2.0과 SSPL은 오픈소스가 아니며, 상업적 클라우드 서비스에서의 사용을 제한합니다.
이에 AWS는 기존 오픈소스 버전(7.10)을 포크하여 OpenSearch라는 새로운 프로젝트를 시작했습니다.

- **오픈소스 정신의 계승:**
OpenSearch는 완전한 오픈소스(OSI 승인 Apache 2.0)로, 누구나 자유롭게 사용할 수 있습니다.
Elastic은 2024년 AGPLv3를 도입하며 다시 오픈소스 라이선스를 추가했지만, OpenSearch는 처음부터 오픈소스 원칙을 고수해왔습니다.

### OpenSearch의 주요 특징

- **역색인(Inverted Index) 기반 전문 검색:** 텍스트를 토큰 단위로 분해하고 역색인에 저장하여 빠른 전문 검색을 지원합니다. 토크나이저, 분석기 등을 활용해 다양한 언어와 형태소를 처리할 수 있습니다.

- **분산 아키텍처:** 데이터를 여러 노드에 샤드(shard) 단위로 분산 저장합니다. 레플리카(replica)를 통해 고가용성을 보장하며, 클러스터 단위로 수평 확장이 가능합니다.

- **OpenSearch Dashboards:** Kibana를 포크한 시각화/대시보드 도구입니다. 검색 결과 시각화, 로그 모니터링, 대시보드 구성 등을 제공합니다.

- **플러그인 생태계:** 보안(Security), 알림(Alerting), SQL 쿼리, 이상 탐지(Anomaly Detection), ML Commons 등 다양한 플러그인을 기본 내장하고 있습니다.

- **벡터 검색(k-NN):** k-Nearest Neighbors 알고리즘 기반의 벡터 유사도 검색을 지원합니다. 의미 체계 검색, 추천 시스템, RAG 등에 활용할 수 있습니다.

### Elasticsearch와의 관계

OpenSearch는 Elasticsearch 7.10에서 포크되었기 때문에, 기본적인 REST API와 쿼리 DSL은 호환됩니다. 다만 포크 이후 각각 독자적으로 발전하면서 차이가 생기고 있습니다.

- **호환:** 인덱스 구조, 매핑, 기본 검색/집계 쿼리 등 핵심 API는 대부분 호환
- **OpenSearch 독자 기능:** k-NN 벡터 검색, ML Commons, Security Analytics, OpenSearch Dashboards Notebooks 등
- **Elasticsearch 독자 기능:** Elastic Agent, ESQL, Elastic Security 등

마이그레이션 시에는 사용 중인 API와 플러그인의 호환성을 개별적으로 확인해야 합니다.

### Amazon OpenSearch Service

AWS는 OpenSearch를 기반으로 한 관리형 클라우드 서비스(Amazon OpenSearch Service)를 제공합니다.
이 서비스는 클러스터 관리, 모니터링, 확장 등 인프라 운영 부담을 줄여줍니다.
기존 Elasticsearch 7.10까지는 지원하지만, 그 이후 버전은 오픈소스가 아니므로 OpenSearch만 지원합니다.

- **Managed Cluster:** 직접 인스턴스 타입, 노드 수, 스토리지를 설정하여 클러스터를 구성합니다. 세밀한 리소스 제어가 필요한 경우에 적합합니다.
- **OpenSearch Serverless:** 용량을 자동으로 프로비저닝하고 확장하는 서버리스 옵션입니다. 인프라 관리 없이 검색 및 분석 워크로드를 실행할 수 있습니다.

> Amazon OpenSearch Service의 상세 내용은 [4. Aws OpenSearch Service 문서 딥다이빙](./4.%20Aws%20OpenSearch%20Service%20문서%20딥다이빙.md)에서 다룹니다.
